<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capítulo 10: Web Services</title>
	<meta name="description" content="Implementación de webservices mediante STxT">
	<meta name="author" content="Joan Costa Mombiela">

    <link rel="stylesheet" href="/css/site.css?v=1">
		
			
		<link rel="alternate" hreflang="en" href="http://www.semantictext.info/en/chapter_10.html" />
		
	<script src="/js/cookie.js?v=1"></script>
	<script src="/js/page.js?v=1"></script>
</head>

<body>

	<!-- *********** -->
	<!-- main_header -->
	<!-- *********** -->
	
    <header id="main_header">
	    <h1>
			<a href="index.html">
				<span class="color1"><b>S</b></span>TxT: El Libro
			    	    </a>
		</h1>
		<h2><a href="index.html">Un lenguaje para la web</a></h2>
		<ul>
			<li><a href="about.html" title="Sobre nosotros">Sobre nosotros</a></li>
			<li><a href="donate.html" title="Donaciones">Donaciones</a></li>
			<li><a href="contribute.html" title="Contribuir">Contribuir</a></li>
			<li><a href="licence.html" title="Licencia">Licencia</a></li>
			<li><b> | </b></li>
							<li><b>Español</b></li>
				<li><a href="../en/chapter_10.html" onclick="setLang('en'); return false;"  title="Español"><i>English</i></a></li>
						    	</ul>
    </header>

	<!-- ******* -->
	<!-- top bar -->
	<!-- ******* -->
	
    <div class="top-bar">
    	<ul>
			<li class="link_src"><a href="chapter_10.stxt" target="chapter_10" title="Source STxT">&#x25BC;&#x25BC;&#x25BC;</a></li>
			<li><a href="index.html" title="¡Hola!">¡Hola!</a></li>
			<li><a href="chapter_00_c.html" title="El Libro">El Libro</a></li>
			<li><a href="chapter_03.html" title="Tutorial">Tutorial</a></li>
			<li><a href="chapter_09.html" title="STxT y XML">STxT y XML</a></li>
			<li><a href="swb.html" title="SWB">SWB</a></li>
			<li><a href="stxt.html" title="Semantic Text">Semantic Text</a></li>
    	</ul>
    </div>
	
	<!-- ******* -->
	<!-- Content -->
	<!-- ******* -->
	
    <div id="main_content" class="clearfix">
      <article>
      				<div class="column row book_nav clearfix">
		
		           	<a style="float:left;"	href="chapter_09.html" title="Anterior">&#x25C4; Anterior</a>
				           	<a style="float:right;" href="chapter_11.html" title="Siguiente">Siguiente &#x25BA;</a>
			</div>
	
									<h1>Capítulo 10: Web Services</h1>
						
			
																				            	<h2><a id="index_0"></a>Advertencia</h2>
																<p>Igual que el capítulo anterior. Los fans de Webservices y SOAP me tendrán que perdonar y disculpar.
Mejor que no lean nada de este capítulo.</p>
<p>Rectifico. Mejor que sí que lo lean. De hecho, los animo a hacerlo.
La mejor opinión es la de quien realmente conoce y ha usado una tecnología.</p>

								            	<h2><a id="index_1"></a>SOAP en la teoría</h2>
																<p>SOAP es fantástico. Es un lenguaje para realizar servicios web. Está basado en xml,
y eso hace que sea estándar y multiplataforma. También se basa en tecnologías probadas,
tales como XSD&#39;s. Si hubiera complejidad, no habrá problema. Se crearán herramientas,
y éstas siempre funcionarán bien, y lo que podría parecer complejo se realizará de forma automática,
con unos pocos &quot;click&#39;s&quot; de ratón. Los sistemas se entenderán entre ellos,
y romperemos las fronteras entre los lenguajes.</p>
<p>En la teoría, la teoría y la práctica son iguales. En la práctica esto no es verdad. (*)</p>
<p><em>(*) No recuerdo quien lo dijo, pero me gustó.</em></p>

								            	<h2><a id="index_2"></a>SOAP en la práctica</h2>
																<p>Pero la práctica no siempre nos da la razón. Hay cosas que escapan al control.
Una vez más la complejidad se hace patente en toda su inmensidad.
Hay demasiadas variables, demasiadas interpretaciones. Demasiadas partes implicadas.
Librerías que pasan código nativo a XML y se parsean de forma automática.
Nadie puede leer de forma decente un mensaje. Los errores se transforman en tragedias.
¿La librería falla? ¿El protocolo es ligeramente distinto? ¿El parseo del WSDL no fue correcto?
¿Pero qué pone en el WSDL? ¡No lo entiendo! Lo que debería ser la gran solución
se va transformando en el gran problema. Una buena idea, imposible de poner en práctica.</p>
<p>Lo siento, pero yo lo veo así.</p>

								            	<h2><a id="index_3"></a>REST</h2>
																<p>La aparición de los servicios REST son una respuesta clara a los problemas de SOAP.
Todo está tendiendo hacia allí. Y no me extraña. Yo también lo haría.
Los grandes están en el camino. Los móviles se hablan de esta forma.
Pero todavía les falta algo. Ya hay iniciativas, pero no es un camino fácil.
Les falta un poco más de estructura y saber cómo son los servicios.</p>

												<div class="row">
            		<div class="assert"><p>Atentos. La solución ha llegado. Se llama <span class='STxT'><span class='first'>S</span>TxT</span>.</p>
</div>
            	</div>
								            	<h2><a id="index_4"></a><span class='STxT'><span class='first'>S</span>TxT</span>: Un nuevo enfoque</h2>
																<p>Ahora tenemos una nueva herramienta. Se llama <span class='STxT'><span class='first'>S</span>TxT</span>. ¿Cómo se definiría un webservice?</p>
<p>Voy a hacer propuestas, esto sería un nuevo mundo para explorar.
Me conformo	con indicar posibles caminos o puntos de partida.</p>
<p>Si hiciera un símil de un WSDL, me gustaría que un conjunto de servicios
se definieran de la siguiente forma:</p>

												<pre>Webservices(...):
    Service:
        url: http://xxxx/fsfs
        entrada: Nodo1(www.example.com/nodo.stxt)
        salida: Nodo2(www.example.com/nodo.stxt)
        
    Service:
        url: http://xxxx/fsfs
        entrada: Nodo3(www.example.com/nodo.stxt)
        salida: OtroZ(www.demo.com/demo.stxt)
        
    Service:
        url: http://xxxx/fsfs
        entrada: Nodo3(www.example.com/nodo.stxt)
        salida: OtroX(www.demo.com/demo.stxt)</pre>
												<p>o quizá de la siguiente forma:</p>

												<pre>Webservice(...):
    url: http://xxxx/fsfs
    
    Service:
        method: xxx
        entrada: Nodo1(www.example.com/nodo.stxt)
        salida: Nodo2(www.example.com/nodo.stxt)
        
    Service:
        method: yyy
        entrada: Nodo3(www.example.com/nodo.stxt)
        salida: OtroZ(www.demo.com/demo.stxt)
        
    Service:
        method: zzz
        entrada: Nodo3(www.example.com/nodo.stxt)
        salida: OtroX(www.demo.com/demo.stxt)</pre>
												<p>En este punto no me gustaría decir nada más. No me atrevo,
pero supongo que ya habéis captado la idea: <em>simplificar</em>.
Todo es más sencillo cuando entra en juego <span class='STxT'><span class='first'>S</span>TxT</span>.
Todo está más claro. Y definido.</p>

												<div class="row">
            		<div class="assert"><p>Teníamos SOAP, REST, y ahora... <br/>
<em>SWS</em>: ¡¡Semantic web services!!</p>
</div>
            	</div>
												<p>Bien, ya que es un servicio http(s) también podríamos hacer algo híbrido ;-)</p>

												<pre>Webservices(...):
    Service:
        url: http://www.xxx.com/yyy
        params:
            param: 
                name: p1
                descrip: Descripci&oacute;n de param1
            param: 
                name: p2
                descrip: Descripci&oacute;n de param2
            param: 
                name: p2
                descrip: Descripci&oacute;n de param3
        salida: Nodo2(www.example.com/nodo.stxt)
        
    Service:
        url: http://www.xxx.com/ttt
        salida: OtroZ(www.demo.com/demo.stxt)
        
    Service:
        url: http://www.xxx.com/zzz
        salida: OtroX(www.demo.com/demo.stxt)</pre>
												<p>Hay muchas posibilidades, me gustan todas con <span class='STxT'><span class='first'>S</span>TxT</span> ;-)</p>

								            	<h2><a id="index_5"></a>Una propuesta definitiva</h2>
																<p>Al final lo he hecho. Inicialmente no quería, pero no lo he podido evitar.</p>
<p>Voy a hacer una propuesta de definición de webservices, y además la voy a hacer disponible.
Va a ser parecida a	los ejemplos anteriores que hemos visto.</p>

								            	<h3><a id="index_6"></a>La gramática</h3>
																<p>La gramática está disponible en <a href="www.semantictext.info/web_services.stxt">www.semantictext.info/web_services.stxt</a></p>
<p>Tiene el siguiente código:</p>

												<pre>Namespace definition (www.semantictext.info/namespace.stxt):

Node Definition:
    Type:NODE
    Name:wsd
    Alias:Web Service Definitions
    Child:
        Node:SWS Service
        Num:*
    Child:
        Node:Hybrid Service
        Num:*
    Child:
        Node:REST Service
        Num:*
Node Definition:
    Type:NODE
    Name:sws_service
    Alias:SWS Service
    Child:
        Node:Url
        Num:1
    Child:
        Node:Input Document
        Num:1
    Child:
        Node:Output Document
        Num:1
    Child:
        Node:Description
        Num:?
Node Definition:
    Type:NODE
    Name:hybrid_service
    Alias:Hybrid Service
    Alias:Hy Service
    Child:
        Node:Url
        Num:1
    Child:
        Node:Method
        Num:1
    Child:
        Node:Params Encoding
        Num:1
    Child:
        Node:Param
        Num:*
    Child:
        Node:Output Document
        Num:1
    Child:
        Node:Description
        Num:?
Node Definition:
    Type:NODE
    Name:REST Service
    Child:
        Node:Url
        Num:1
    Child:
        Node:Method
        Num:1
    Child:
        Node:Params Encoding
        Num:1
    Child:
        Node:Param
        Num:*
    Child:
        Node:Description
        Num:?
Node Definition:
    Type:NODE
    Name:Param
    Child:
        Node:Name
        Num:1
    Child:
        Node:Descrip
        Num:?
Node Definition:
    Type:TEXT
    Name:Url
Node Definition:
    Type:TEXT
    Name:Params Encoding
Node Definition:
    Type:TEXT
    Name:Input Document
Node Definition:
    Type:TEXT
    Name:Output Document
Node Definition:
    Type:TEXT
    Name:Name
Node Definition:
    Type:TEXT
    Name:descrip
    Alias:Description
Node Definition:
    Type:TEXT
    Name:Method</pre>
								            	<h3><a id="index_7"></a>La explicación</h3>
																<p>El documento <span class='STxT'><span class='first'>S</span>TxT</span> encargado de definir uno (o varios webservices) será
un documento del tipo:</p>

												<pre>Web Service Definitions(www.semantictext.info/web_services.stxt)</pre>
												<p>Este documento permite definir servicios de 3 tipos distintos:</p>
<ul><li><strong>SWS Service</strong>: Un documento <span class='STxT'><span class='first'>S</span>TxT</span> de entrada (encoding UTF-8) y un documento <span class='STxT'><span class='first'>S</span>TxT</span> de salida (UTF-8).
Se usará el método POST, ya que es lo más recomendable para este tipo de envíos.
Este sería un web service puro usando solamente <span class='STxT'><span class='first'>S</span>TxT</span>.</li>
<li><strong>Hybrid Service</strong>: Parámetros de entrada http y un documento <span class='STxT'><span class='first'>S</span>TxT</span> de salida.
Se puede especificar el encoding esperado de los parámetros (Normalmente ISO-8859-1 o UTF-8) y 
también el método http a ejecutar (GET o POST normalmente).</li>
<li><strong>REST Service</strong>: Parámetros de entrada http estándar y una respuesta estándar de salida (json, xml, csv, etc.).
Igual que el híbrido también podremos especificar el encoding y el método http a ejecutar.</li></ul>
<p>En los tres tipos distintos es necesario especificar la url que hay que ejecutar.
Además también es recomendable utilizar el campo <em>descrip</em> para dar
una explicación de lo que hace el webservice.</p>
<p>Tanto el <em>SWS</em> como el <em>Hybrid</em> tienen que retornar un documento <span class='STxT'><span class='first'>S</span>TxT</span> válido, 
por	lo que la salida debería ser en UTF-8.</p>
<p>Un ejemplo de mensaje HTTP para un servicio puro SWS:</p>

												<pre>POST /url/of/webservice HTTP/1.0
Host: www.example.demo
Content-Type: text/plain; charset=utf-8

A node(www.example.demo/ws.stxt):
Document: This is a demo
Text: Hello world!!!
Client:
    Id:1
    Name:Evelyn
Client:
    Id:2
    Name:John</pre>
								            	<h3><a id="index_8"></a>El ejemplo</h3>
																<pre>Web Service Definitions(www.semantictext.info/web_services.stxt):

SWS Service:
    Url: http://www.ws.demo/example_sws_1.ws 
    Input Document: Example Input (webservice.demo/example.stxt)
    Output Document: Example Output (webservice.demo/example.stxt)
    Description: Description of the webservice 
    
SWS Service:
    Url: http://www.ws.demo/example_sws_1.ws
    Input Document: Demo Input (webservice.demo/demo.stxt)
    Output Document: Demo Output (webservice.demo/demo.stxt)
    Description: Description of the webservice 
     
SWS Service:
    Url: http://www.ws.demo/example_sws_2.ws 
    Input Document: Example Input (webservice.demo/example.stxt)
    Output Document: Example Output (webservice.demo/example.stxt)
    Description: Description of the webservice 
     
Hybrid Service:
    Url: http://www.ws.demo/example_hybrid.ws 
    Method: POST
    Params Encoding: UTF-8
    Param:
        Name:param_1
        Description: Description of param_1 
    Param:
        Name:param_n
        Description: Description of param_n 
    Output Document: Example Output (webservice.demo/example.stxt)
    Description: Description of the webservice 
     
REST Service:
    Url: http://www.ws.demo/example_rest.ws 
    Method: POST
    Params Encoding: UTF-8
    Param:
        Name:param_1
        Description: Descripci&oacute;n de param_1
    Param:
        Name:param_n
        Description: Descripci&oacute;n de param_n
    Description: Description of the webservice 
        The response is in **JSON** format.
        Example: {response:code, message:&quot;A message&quot;}
        
        Code results:
        * 0: OK
        * 1: Warning
        * 2: Error
        * 3: Fatal error</pre>
								            	<h3><a id="index_9"></a>La reflexión</h3>
																<p>En unas pocas líneas hemos condensado gran cantidad de información,
pero de una forma muy clara y sencilla.</p>
<p><em>¿Os imagináis como sería un documento WSDL equivalente?</em></p>
<p><em>¿Y los mensajes SOAP asociados?</em></p>
<p>Podemos afirmar que en un solo capítulo hemos explicado como podrían ser
los webservices, en caso de basar su implementación y definición en <span class='STxT'><span class='first'>S</span>TxT</span>.</p>
<p>Nuestra definición de webservice es igualmente útil para humanos y para
máquinas, ya que contiene toda la información necesaria para utilizar
un webservice eficientemente. Además, crear una implementación
debería ser relativamente sencillo.</p>

						
						<div class="column row book_nav clearfix">
		
		           	<a style="float:left;"	href="chapter_09.html" title="Anterior">&#x25C4; Anterior</a>
				           	<a style="float:right;" href="chapter_11.html" title="Siguiente">Siguiente &#x25BA;</a>
			</div>
			  </article>
	  	
	  <aside id="advertisement">
		<h2>Patrocinadores</h2>
    	<p>¿Quieres ser nuestro patrocinador? De momento no tenemos patrocinadores oficiales, pero estamos abiertos a propuestas.<p>
    	<p>¿Quieres ser uno de ellos? Contacta con nosotros: <a href="mailto:admin@semantictext.info">admin@semantictext.info</a></p>
    	<p>Este será tu espacio reservado ;-)</p>
    	<br>
    	    	    	    	<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- STxT - Adaptable -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="5037052041"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
	  </aside>
	</div>
	
	<footer><p>&copy; 2019 - Este obra está bajo una <a style="text-decoration:underline" rel="license" href="https://raw.githubusercontent.com/mombiela/semantic-web-builder/master/LICENSE">Licencia MIT</a>.</p></footer>
	
	<div id="cookies_adv">
		Usamos cookies para mejorar su experiencia de uso y ofrecer contenidos adaptados a sus intereses
        <a href="javascript:accept();" class="button">Entendido!</a>
        <a href="cookies.html">Más información</a>
    </div>
    <script>checkCookies();</script>
</body>
</html>
